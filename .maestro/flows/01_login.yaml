# Login Flow - Smoke Test
# Tests: User can log in with valid credentials
# Tags: smoke, auth
# NOTE: App must already be running via Flutter with Supabase credentials
# NOTE: DB should be reset before running (supabase db reset), so app starts on login page

appId: com.brianrosen.stripcall
tags:
  - smoke
  - auth

---
# Wait for login page to be ready (DB was reset, so no active session)
- extendedWaitUntil:
    visible:
      id: "login_email_field"
    timeout: 15000

# Enter credentials
- tapOn:
    id: "login_email_field"
- inputText: "e2e_superuser@test.com"

- tapOn:
    id: "login_password_field"
- inputText: "TestPassword123!"

# Submit login
- tapOn:
    id: "login_submit_button"

# Wait for navigation to complete
- waitForAnimationToEnd
- extendedWaitUntil:
    visible:
      id: "select_event_list"
    timeout: 15000

# Verify we're on the event selection page
- assertVisible:
    id: "select_event_list"
